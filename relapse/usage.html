<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Mon Feb 12 2024 11:37:48 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="65392ddd82f3876f4f84220e" data-wf-site="62fa1b7c943e1b195a14776d">
<head>
  <meta charset="utf-8">
  <title>Usage</title>
  <meta content="Usage" property="og:title">
  <meta content="Usage" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../css/webflow.css" rel="stylesheet" type="text/css">
  <link href="../css/katydid-3d74ff.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["IBM Plex Mono:100,200,300,regular,500,600,700","Noto Sans:200,300,regular,500,600,700,800"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="../images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="../images/webclip.png" rel="apple-touch-icon">
  <style>
/*width*/
.scroll::-webkit-scrollbar {
width:10px;
}
/*thumb*/
.scroll::-webkit-scrollbar-thumb {
background:rgb(206, 236, 236);
border-radius:0px;
}
/*thumb pressed*/
.scroll::-webkit-scrollbar-thumb:active {
border-radius:2px;
}
</style>
</head>
<body>
  <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-2 dropdowns small-screens w-nav">
    <div class="navbar_container nav_container">
      <a href="../index.html" class="brand w-nav-brand"><img src="../images/katydid-logo-quality.png" loading="lazy" alt="" width="51.5" class="nav_logo"></a>
      <a href="../index.html" class="logo-text w-inline-block">
        <h2 class="heading-6 logo">katydid</h2>
      </a>
      <nav role="navigation" class="nav-menu tablet w-nav-menu">
        <div data-hover="false" data-delay="0" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Parsers</div>
          </div>
          <nav class="dropdown-list dropdown-box w-dropdown-list">
            <a href="../parsers/usage.html" class="dropdown-link-3 w-dropdown-link">Usage</a>
            <a href="../parsers/extend.html" class="dropdown-link-3 w-dropdown-link">Extend</a>
          </nav>
        </div>
        <div data-hover="false" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Language</div>
          </div>
          <nav class="dropdown-list-8 w-dropdown-list">
            <a href="../relapse/usage.html" aria-current="page" class="dropdown-link-3 w-dropdown-link w--current">Usage</a>
            <a href="../relapse/syntax.html" class="dropdown-link-3 w-dropdown-link">Syntax</a>
            <a href="../relapse/types.html" class="dropdown-link-3 w-dropdown-link">Types</a>
            <a href="../relapse/functions.html" class="dropdown-link-3 w-dropdown-link">Functions</a>
            <a href="../relapse/extend.html" class="dropdown-link-3 w-dropdown-link">Extend</a>
            <a href="../relapse/speed.html" class="dropdown-link-3 w-dropdown-link">Speed</a>
          </nav>
        </div>
        <div data-hover="false" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Encoders</div>
          </div>
          <nav class="dropdown-list-7 w-dropdown-list">
            <a href="../encoders/usage.html" class="dropdown-link-3 w-dropdown-link">Usage</a>
          </nav>
        </div>
        <div data-hover="false" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Tests</div>
          </div>
          <nav class="dropdown-list-5 w-dropdown-list">
            <a href="../tests/test-suite.html" class="dropdown-link-3 w-dropdown-link">Test Suite</a>
          </nav>
        </div>
        <a href="https://katydid.github.io/play/" class="nav-button-gradient w-inline-block">
          <div class="nav_button-2 tablet">Playground</div>
        </a>
        <a href="https://katydid.github.io/tour/" class="nav-button-gradient guided w-inline-block">
          <div class="nav_button-2 tablet">Guided Tour</div>
        </a>
      </nav>
      <div class="menu-button-2 tablet w-nav-button">
        <div class="w-icon-nav-menu"></div>
      </div>
    </div>
  </div>
  <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-2 dropdowns desktop w-nav">
    <div class="navbar_container nav_container">
      <a href="../index.html" class="brand w-nav-brand"><img src="../images/katydid-logo-quality.png" loading="lazy" alt="" width="51.5" class="nav_logo"></a>
      <a href="../index.html" class="logo-text w-inline-block">
        <h2 class="heading-6 logo">katydid</h2>
      </a>
      <nav role="navigation" class="nav-menu tablet w-nav-menu">
        <div data-hover="true" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Parsers</div>
          </div>
          <nav class="dropdown-list dropdown-box w-dropdown-list">
            <a href="../parsers/usage.html" class="dropdown-link-4 w-dropdown-link">Usage</a>
            <a href="../parsers/extend.html" class="dropdown-link-4 w-dropdown-link">Extend</a>
          </nav>
        </div>
        <div data-hover="true" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Language</div>
          </div>
          <nav class="dropdown-list-11 w-dropdown-list">
            <a href="../relapse/usage.html" aria-current="page" class="dropdown-link-4 w-dropdown-link w--current">Usage</a>
            <a href="../relapse/syntax.html" class="dropdown-link-4 w-dropdown-link">Syntax</a>
            <a href="../relapse/types.html" class="dropdown-link-4 w-dropdown-link">Types</a>
            <a href="../relapse/functions.html" class="dropdown-link-4 w-dropdown-link">Functions</a>
            <a href="../relapse/extend.html" class="dropdown-link-4 w-dropdown-link">Extend</a>
            <a href="../relapse/speed.html" class="dropdown-link-4 w-dropdown-link">Speed</a>
          </nav>
        </div>
        <div data-hover="true" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Encoders</div>
          </div>
          <nav class="dropdown-list-10 w-dropdown-list">
            <a href="../encoders/usage.html" class="dropdown-link-4 w-dropdown-link">Usage</a>
          </nav>
        </div>
        <div data-hover="true" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Tests</div>
          </div>
          <nav class="dropdown-list-10 w-dropdown-list">
            <a href="../tests/test-suite.html" class="dropdown-link-4 w-dropdown-link">Test Suite</a>
          </nav>
        </div>
        <a href="https://katydid.github.io/play/" class="nav-button-gradient w-inline-block">
          <div class="nav_button-2 tablet">Playground</div>
        </a>
        <a href="https://katydid.github.io/tour/" class="nav-button-gradient guided w-inline-block">
          <div class="nav_button-2 tablet">Guided Tour</div>
        </a>
      </nav>
      <div class="menu-button-2 tablet w-nav-button">
        <div class="w-icon-nav-menu"></div>
      </div>
    </div>
  </div>
  <div class="hero-section">
    <div data-w-id="cfa55f48-2a1d-5c9f-33fb-311404c026f4" style="opacity:0" class="circle_heading">
      <div class="hero-heading usage">Usage</div>
    </div>
    <div class="intro rel-usage">
      <div>
        <p class="paragraph">This page will explain how to go from a Katydid grammar to validating a parsed tree. This is done in two steps. Each of these steps have several alternatives.  </p>
        <div>
          <div class="text-block-22">1.  Construct the Grammar<br>2.  Validation</div>
        </div>
        <p class="paragraph-11">This assumes you have already constructed a parser, if not see the page on <a href="../parsers/extend.html" id="parser-usage" class="inline-link">parser usage</a>.</p>
      </div>
    </div>
  </div>
  <div class="section-margin">
    <div class="my-container heading">
      <div class="w-embed">
        <style>
.gradient {
    -webkit-text-fill-color: transparent;
    -webkit-background-clip: text;
</style>
      </div>
      <h1 class="gradient-heading gradient heading-size-1">Constructing a Relapse Grammar</h1>
      <p class="paragraph">First we need to parse our relapse string into a grammar. This is perfect for when we are receiving a string from the user or a configuration file.</p>
    </div>
    <div class="code-block">
      <div class="code-block-text"><span class="res-words">import</span> <span class="strings">&quot;github.com/katydid/katydid/relapse&quot;</span> <br><br><span class="res-words">func</span> main() { <br>    katydidString := <span class="strings">&quot;a:*&quot;</span> <br>    katydidGrammar, err := relapse.Parse(katydidString) <br>    <span class="res-words">if</span> err != <span class="res-id">nil</span> { <br>        <span class="res-id">panic</span>(err) <br>    } <br>}<br></div>
    </div>
    <div class="my-container">
      <p class="paragraph">If you don’t understand the <span class="inline-code">katydidString</span>’s value it might be good idea to first take the <a href="https://katydid.github.io/tour/" id="relapse-tour" class="inline-link">Katydid Tour</a>.<br>We could also have programmatically constructed our ast (abstract syntax tree). <br></p>
    </div>
    <div class="code-block">
      <div class="code-block-text"><span class="res-words">import</span> <span class="strings">&quot;github.com/katydid/katydid/relapse/ast&quot;</span> <br><br><span class="res-words">func</span> main() { <br>    katydidPattern := ast.NewTreeNode(ast.NewStringName(<span class="strings">&quot;a&quot;</span>),ast.NewZAny()) <br>    katydidRefs := map[string]*ast.Pattern{<span class="strings">&quot;main&quot;</span>: katydidPattern} <br>    katydidGrammar := ast.NewGrammar(katydidRefs) <br>}<br></div>
    </div>
    <div class="my-container">
      <p class="paragraph">This can become quite verbose, so we can rather use the combinator library, with which we can more concisely, but still programmatically, construct the grammar.</p>
    </div>
    <div class="code-block">
      <div class="code-block-text"><span class="res-words">import</span> . <span class="strings">&quot;github.com/katydid/katydid/relapse/combinator&quot;</span> <br><br><span class="res-words">func</span> main() { <br>    katydidPattern := In(<span class="strings">&quot;a&quot;</span>, Any()) <br>    g := G{<span class="strings">&quot;main&quot;</span>: katydidPattern} <br>    katydidGrammar := g.Grammar() <br>}<br></div>
    </div>
    <div class="my-container">
      <p class="paragraph">We can also use combinator functions on the leaves.</p>
    </div>
    <div class="code-block">
      <div class="code-block-text"><span class="res-words">import</span> . <span class="strings">&quot;github.com/katydid/katydid/relapse/combinator&quot;</span> <br><br><span class="res-words">func</span> main() { <br>    fun := Eq(StringVar(), StringConst(<span class="strings">&quot;abc&quot;</span>)) <br>    katydidPattern := In(<span class="strings">&quot;a&quot;</span>, Value(fun)) <br>    g := G{<span class="strings">&quot;main&quot;</span>: katydidPattern} <br>    katydidGrammar := g.Grammar() <br>}<br></div>
    </div>
    <div class="my-container heading-less-pad">
      <h1 class="gradient-heading gradient heading-size-2">Validation</h1>
      <p class="paragraph">Now that we have an initialized parser and a katydid grammar we can validate the parsed tree against the schema.</p>
    </div>
    <div class="code-block">
      <div class="code-block-text"><span class="res-words">import</span> <span class="strings">&quot;github.com/katydid/katydid/relapse&quot;</span> <br><span class="res-words">import</span> <span class="strings">&quot;github.com/katydid/katydid/relapse/ast&quot;</span> <br><span class="res-words">import</span> <span class="strings">&quot;fmt&quot;</span> <br><br><span class="res-words">func</span> validate(grammar *ast.Grammar, p parser.Interface) { <br>    mem := relapse.Prepare(grammar) <br>    match, err := relapse.Validate(mem, p) <br>    <span class="res-words">if</span> err != <span class="res-id">nil</span> { <br>        <span class="res-id">panic</span>(err) <br>    } <span class="res-words"><br></span>    <span class="res-words">if</span> !match { <br>        fmt.Printf(<span class="strings">&quot;Expected match given %s\n&quot;</span>, grammar.String()) <br>    } <br>}<br></div>
    </div>
    <div class="my-container last">
      <p class="paragraph">Here we created a memoized grammar for faster repeated execution, which is the default way to use Katydid, but there are others way too that we won&#x27;t cover here.</p>
    </div>
  </div>
  <div class="footer-section">
    <div class="footer-div">
      <div class="w-layout-grid footer-grid">
        <div class="footer-col">
          <div class="image-div"><img src="../images/katydid-logo-quality.png" loading="lazy" width="51.5" alt="" class="image-31"></div>
          <div class="text-block-21">katydid</div>
        </div>
        <div id="w-node-abfc4d3e-97fb-1ab1-409a-ead63d40dead-3d40dea5" class="footer-col">
          <h1 class="grid-head">About</h1>
          <div class="grid-text">
            <a href="https://github.com/katydid" class="footer-link">Project</a>
          </div>
          <div class="grid-text">
            <a href="http://katydid.github.io/play" class="footer-link">Playground</a>
          </div>
        </div>
        <div id="w-node-abfc4d3e-97fb-1ab1-409a-ead63d40deb4-3d40dea5" class="footer-col">
          <h1 class="grid-head">Contribute</h1>
          <div class="grid-text">
            <a href="mailto:awalterschulze@gmail.com" class="footer-link">Contact</a>
          </div>
          <div class="grid-text">
            <a href="http://github.com/katydid" class="footer-link">Github</a>
          </div>
          <div class="grid-text">
            <a href="#" class="footer-link">More</a>
          </div>
        </div>
        <div id="w-node-abfc4d3e-97fb-1ab1-409a-ead63d40debd-3d40dea5" class="footer-col">
          <h1 class="grid-head">Implement</h1>
          <div class="grid-text">
            <a href="http://github.com/katydid/katydid" class="footer-link">Go</a>
          </div>
          <div class="grid-text">
            <a href="https://github.com/katydid/katydid-haskell" class="footer-link">Haskell</a>
          </div>
          <div class="grid-text">
            <a href="http://github.com/katydid/proofs" class="footer-link">Lean</a>
          </div>
        </div>
        <div id="w-node-abfc4d3e-97fb-1ab1-409a-ead63d40dec6-3d40dea5" class="footer-col">
          <h1 class="grid-head">Social</h1>
          <div class="grid-text">
            <a href="https://github.com/awalterschulze" class="footer-link">Github</a>
          </div>
          <div class="grid-text">
            <a href="https://www.linkedin.com/in/awalterschulze/" class="footer-link">LinkedIn</a>
          </div>
          <div class="grid-text">
            <a href="https://twitter.com/awalterschulze" class="footer-link">Twitter</a>
          </div>
          <div class="grid-text">
            <a href="https://www.youtube.com/c/awalterschulze" class="footer-link">Youtube</a>
          </div>
        </div>
        <div id="w-node-abfc4d3e-97fb-1ab1-409a-ead63d40ded1-3d40dea5" class="footer-col">
          <h1 class="grid-head">Help</h1>
          <div class="grid-text">
            <a href="http://katydid.github.io/tour" class="footer-link">Tour</a>
          </div>
          <div class="grid-text">
            <a href="http://github.com/katydid/katydid/issues" class="footer-link">Issues</a>
          </div>
          <div class="grid-text">
            <a href="../relapse/syntax.html" class="footer-link">Syntax</a>
          </div>
        </div>
      </div>
      <div class="text-block-3">© Copyright 2014 - 2024 Walter Schulze</div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=62fa1b7c943e1b195a14776d" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="../js/webflow.js" type="text/javascript"></script>
</body>
</html>