<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Sat Oct 21 2023 12:42:03 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="63614076e9e25d1fc88c59e4" data-wf-site="62fa1b7c943e1b195a14776d">
<head>
  <meta charset="utf-8">
  <title>Speed</title>
  <meta content="Speed" property="og:title">
  <meta content="Speed" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../css/webflow.css" rel="stylesheet" type="text/css">
  <link href="../css/katydid-3d74ff.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["IBM Plex Mono:100,200,300,regular,500,600,700","Noto Sans:200,300,regular,500,600,700,800"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="../images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="../images/webclip.png" rel="apple-touch-icon">
  <style>
/*width*/
.scroll::-webkit-scrollbar {
width:10px;
}
/*thumb*/
.scroll::-webkit-scrollbar-thumb {
background:rgb(206, 236, 236);
border-radius:0px;
}
/*thumb pressed*/
.scroll::-webkit-scrollbar-thumb:active {
border-radius:2px;
}
</style>
</head>
<body>
  <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-2 dropdowns small-screens w-nav">
    <div class="navbar_container nav_container">
      <a href="../index.html" class="brand w-nav-brand"><img src="../images/katydid-logo-quality.png" loading="lazy" alt="" width="51.5" class="nav_logo"></a>
      <a href="../index.html" class="logo-text w-inline-block">
        <h2 class="heading-6 logo">katydid</h2>
      </a>
      <nav role="navigation" class="nav-menu tablet w-nav-menu">
        <div data-hover="false" data-delay="0" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Parsers</div>
          </div>
          <nav class="dropdown-list dropdown-box w-dropdown-list">
            <a href="../parsers/usage.html" target="_blank" class="dropdown-link-3 w-dropdown-link">Usage</a>
            <a href="../parsers/extend.html" target="_blank" class="dropdown-link-3 w-dropdown-link">Extend</a>
          </nav>
        </div>
        <div data-hover="false" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Language</div>
          </div>
          <nav class="dropdown-list-8 w-dropdown-list">
            <a href="../relapse/usage.html" target="_blank" class="dropdown-link-3 w-dropdown-link">Usage</a>
            <a href="../relapse/syntax.html" target="_blank" class="dropdown-link-3 w-dropdown-link">Syntax</a>
            <a href="../relapse/types.html" target="_blank" class="dropdown-link-3 w-dropdown-link">Types</a>
            <a href="../relapse/functions.html" target="_blank" class="dropdown-link-3 w-dropdown-link">Functions</a>
            <a href="../relapse/extend.html" target="_blank" class="dropdown-link-3 w-dropdown-link">Extend</a>
            <a href="../relapse/speed.html" target="_blank" aria-current="page" class="dropdown-link-3 w-dropdown-link w--current">Speed</a>
          </nav>
        </div>
        <div data-hover="false" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Encoders</div>
          </div>
          <nav class="dropdown-list-7 w-dropdown-list">
            <a href="../encoders/usage.html" target="_blank" class="dropdown-link-3 w-dropdown-link">Usage</a>
          </nav>
        </div>
        <div data-hover="false" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Tests</div>
          </div>
          <nav class="dropdown-list-5 w-dropdown-list">
            <a href="../tests/test-suite.html" target="_blank" class="dropdown-link-3 w-dropdown-link">Test Suite</a>
          </nav>
        </div>
        <a href="https://katydid.github.io/play/" target="_blank" class="nav-button-gradient w-inline-block">
          <div class="nav_button-2 tablet">Playground</div>
        </a>
        <a href="https://katydid.github.io/tour/" target="_blank" class="nav-button-gradient guided w-inline-block">
          <div class="nav_button-2 tablet">Guided Tour</div>
        </a>
      </nav>
      <div class="menu-button-2 tablet w-nav-button">
        <div class="w-icon-nav-menu"></div>
      </div>
    </div>
  </div>
  <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-2 dropdowns desktop w-nav">
    <div class="navbar_container nav_container">
      <a href="../index.html" class="brand w-nav-brand"><img src="../images/katydid-logo-quality.png" loading="lazy" alt="" width="51.5" class="nav_logo"></a>
      <a href="../index.html" class="logo-text w-inline-block">
        <h2 class="heading-6 logo">katydid</h2>
      </a>
      <nav role="navigation" class="nav-menu tablet w-nav-menu">
        <div data-hover="true" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Parsers</div>
          </div>
          <nav class="dropdown-list dropdown-box w-dropdown-list">
            <a href="../parsers/usage.html" target="_blank" class="dropdown-link-4 w-dropdown-link">Usage</a>
            <a href="../parsers/extend.html" target="_blank" class="dropdown-link-4 w-dropdown-link">Extend</a>
          </nav>
        </div>
        <div data-hover="true" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Language</div>
          </div>
          <nav class="dropdown-list-11 w-dropdown-list">
            <a href="../relapse/usage.html" target="_blank" class="dropdown-link-4 w-dropdown-link">Usage</a>
            <a href="../relapse/syntax.html" target="_blank" class="dropdown-link-4 w-dropdown-link">Syntax</a>
            <a href="../relapse/types.html" target="_blank" class="dropdown-link-4 w-dropdown-link">Types</a>
            <a href="../relapse/functions.html" target="_blank" class="dropdown-link-4 w-dropdown-link">Functions</a>
            <a href="../relapse/extend.html" target="_blank" class="dropdown-link-4 w-dropdown-link">Extend</a>
            <a href="../relapse/speed.html" target="_blank" aria-current="page" class="dropdown-link-4 w-dropdown-link w--current">Speed</a>
          </nav>
        </div>
        <div data-hover="true" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Encoders</div>
          </div>
          <nav class="dropdown-list-10 w-dropdown-list">
            <a href="../encoders/usage.html" target="_blank" class="dropdown-link-4 w-dropdown-link">Usage</a>
          </nav>
        </div>
        <div data-hover="true" data-delay="5" class="dropdown w-dropdown">
          <div class="dropdown-toggle-2 links w-dropdown-toggle">
            <div class="text-block-10">Tests</div>
          </div>
          <nav class="dropdown-list-10 w-dropdown-list">
            <a href="../tests/test-suite.html" target="_blank" class="dropdown-link-4 w-dropdown-link">Test Suite</a>
          </nav>
        </div>
        <a href="https://katydid.github.io/play/" target="_blank" class="nav-button-gradient w-inline-block">
          <div class="nav_button-2 tablet">Playground</div>
        </a>
        <a href="https://katydid.github.io/tour/" target="_blank" class="nav-button-gradient guided w-inline-block">
          <div class="nav_button-2 tablet">Guided Tour</div>
        </a>
      </nav>
      <div class="menu-button-2 tablet w-nav-button">
        <div class="w-icon-nav-menu"></div>
      </div>
    </div>
  </div>
  <div class="hero-section">
    <div data-w-id="1fba4a5a-1ab3-423f-a500-5d211d198a29" style="opacity:0" class="circle_heading">
      <div class="hero-heading speed-margins">Speed</div>
    </div>
  </div>
  <div class="section-margin">
    <div class="my-container heading speed">
      <div class="w-embed">
        <style>
.gradient {
    -webkit-text-fill-color: transparent;
    -webkit-background-clip: text;
</style>
      </div>
      <h1 class="gradient-heading gradient heading-size-30">Benchmarks on Small Structures</h1>
      <p class="paragraph">Given the following relatively small message which has been randomly populated.</p>
    </div>
    <div class="code-block">
      <div class="code-block-text">message Person { <br>  optional string Name = 1; <br>  repeated Address Addresses = 2; <br>  optional string Telephone = 3; <br>} <br><br>message Address { <br>  optional int64 Number = 1; <br>  optional string Street = 2; <br>}<br></div>
    </div>
    <div class="my-container">
      <p class="paragraph">We get the following benchmarks for the respective expressions listed below.</p>
    </div>
    <div class="code-block">
      <div class="code-block-text dont-wrap">(.Name == &quot;David&quot; &amp; .Telephone ==&quot;0123456789&quot;)                    835 ns/op       0 allocs/op <br>.Addresses:_[Number == 456, Street == &quot;TheStreet&quot;]                912 ns/op       0 allocs/op <br>(@name|@nil) #nil=!(.Name:*) #name=.Name!=&quot;David&quot;                 339 ns/op       0 allocs/op <br>(@empty|@nil) #empty=.Name-&gt;eq(length($string),0) #nil=!(.Name:*) 671 ns/op       0 allocs/op <br>.Name != &quot;David&quot;                                                  345 ns/op       0 allocs/op <br>.Name:-&gt;eq(length($string),0)                                     679 ns/op       0 allocs/op <br>!(.Name:*)                                                        256 ns/op       0 allocs/op<br>( .Name == &quot;David&quot; | .Telephone == &quot;0123456789&quot;)                  826 ns/op       0 allocs/op <br>.Addresses[*,_:.Number:== 2,_:.Number:== 1]                       389 ns/op       0 allocs/op<br></div>
    </div>
    <div class="my-container">
      <p class="paragraph">That is millions of matches per second.</p>
    </div>
    <div class="my-container heading-less-pad">
      <h1 class="gradient-heading gradient headin-size-14">Recursive Structures</h1>
      <p class="paragraph">Given the randomly populated recursive message below,</p>
    </div>
    <div class="code-block">
      <div class="code-block-text">message SrcTree { <br>  optional string PackageName = 1; <br>  repeated SrcTree Imports = 2; <br>}<br></div>
    </div>
    <div class="my-container">
      <p class="paragraph">We get the following speed for the recursive expression.</p>
    </div>
    <div class="code-block">
      <div class="code-block-text">([PackageName:==&quot;io&quot;,*]|[*,Imports._:@main])                     1751 ns/op       0 allocs/op<br></div>
    </div>
    <div class="my-container">
      <p class="paragraph">That is hundreds of thousands of matches per second.</p>
    </div>
    <div class="my-container heading-less-pad">
      <h1 class="gradient-heading gradient heading-size-14">Medium Size Structures</h1>
      <p class="paragraph">Given the following normal sized message, which has been randomly populated</p>
    </div>
    <div class="code-block">
      <div class="code-block-text">message TypewriterPrison { <br>  optional bytes WineMessenger = 1; <br>  optional bytes ShoelaceBeer = 2; <br>  optional PocketRoses PocketRoses = 3; <br>} <br><br>message PocketRoses { <br>  optional string ScarBusStop = 1; <br>  optional int64 BadgeShopping = 2; <br>  optional int64 DaisySled = 3; <br>  optional int64 SubmarineSaw = 4; <br>  optional bool SmileLetter = 5; <br>  optional BullySunrise IconHope = 6; <br>  optional HopeArch VanPurse = 7; <br>  repeated string MenuPaperclip = 8; <br>  repeated string BeetlePoker = 9; <br>  repeated string WigPride = 10; <br>  optional DivorceFair DivorceFair = 11; <br>  repeated fixed32 FlightParachute = 12; <br>  repeated fixed32 BeerRace = 13; <br>  repeated bytes LoftQuarry = 14; <br>  repeated bytes TaxiDivorce = 15; <br>  repeated fixed32 ElectionButter = 16; <br>  repeated bytes BriefcaseBaboon = 17; <br>  optional string MapShark = 18; <br>  optional bool NetInterlude = 19; <br>}<br></div>
    </div>
    <div class="my-container">
      <p class="paragraph">we get the following benchmarks for the respective expressions listed below.</p>
    </div>
    <div class="code-block">
      <div class="code-block-text">.PocketRoses.DaisySled == 1                                      9653 ns/op       0 allocs/op<br>.PocketRoses.MapShark *= &quot;a&quot;                                     9759 ns/op       0 allocs/op <br>.PocketRoses.MenuPaperclip: [ _ *= &quot;a&quot;, *]                       7030 ns/op       0 allocs/op <br>.PocketRoses.ScarBusStop *= &quot;a&quot;                                  6116 ns/op       0 allocs/op <br>.PocketRoses.SmileLetter::$bool                                  6526 ns/op       0 allocs/op<br></div>
    </div>
    <div class="my-container">
      <p class="paragraph">That is hundreds of thousands of matches per second.</p>
    </div>
    <div class="my-container heading-less-pad">
      <h1 class="gradient-heading gradient heading-size-15">A Large Structure</h1>
      <p class="paragraph">Given a <a href="https://github.com/katydid/testsuite/blob/master/relapse/gen-relapse-tests/puddingmilkshake.proto" class="inline-link">relatively large message</a>.</p>
      <p class="paragraph par-second-line">We get the following benchmarks for the respective expressions listed below.</p>
    </div>
    <div class="code-block">
      <div class="code-block-text">.FinanceJudo.SaladWorry.SpyCarpenter.BridgePepper:_ *=&quot;a&quot;       14905 ns/op       0 allocs/op <br><br>.FinanceJudo.SaladWorry.SpyCarpenter: <br>(.BridgePepper:_ *= &quot;a&quot; &amp; .FountainTarget:_ *= &quot;a&quot;)             15572 ns/op       0 allocs/op<br></div>
    </div>
    <div class="my-container">
      <p class="paragraph">That is tens of thousands of matches per second.</p>
    </div>
    <div class="my-container heading-less-pad">
      <h1 class="gradient-heading gradient heading-size-16">How to reproduce</h1>
      <p class="paragraph">Benchmarks were run using Golang version 1.6 on a 2,7 GHz Intel Core i7 MacBook Pro with 16 GB 1600 MHz DDR3 memory.</p>
      <p class="paragraph par-second-line">This speed was achieved using the <a href="https://pkg.go.dev/github.com/katydid/katydid/parser/proto#NewProtoNumParser" target="_blank" class="inline-link">parser/proto.NewProtoNumParser</a> and the <a href="https://pkg.go.dev/github.com/katydid/katydid/relapse/protonum#FieldNamesToNumbers" target="_blank" class="inline-link">relapse/protonum.FieldNamesToNumbers</a> function.</p>
      <p class="paragraph par-second-line">You can also run the benchmarks yourself:</p>
      <div class="code-block">
        <div class="code-block-text">git clone https://github.com/katydid/testsuite$GOPATH/src/github.com/katydid/testsuite <br>(cd $GOPATH/src/github.com/katydid/testsuite &amp;&amp; make regenerate) <br>go test -v -bench=. github.com/katydid/katydid/relapse/auto<br></div>
      </div>
    </div>
    <div class="my-container heading-less-pad">
      <h1 class="gradient-heading gradient heading-size-17">Memoized vs Compiled</h1>
      <p class="paragraph">These benchmarks have been run on the compiled automata or auto package. The mem package contains a memoizing implementation of relapse. This achieves comparable speeds to the compiled version, given some number of iterations.</p>
      <p class="paragraph par-second-line">
        <a href="http://katydid.github.io/bench/index.html" target="_blank" class="inline-link">See our comparable benchmarks</a>
      </p>
      <p class="paragraph par-second-line">Reproducing these benchmarks requires using the b.N argument:</p>
    </div>
    <div class="code-block">
      <div class="code-block-text">go test -v -bench=. github.com/katydid/katydid/relapse/mem-args -b.N=10<br></div>
    </div>
    <div class="my-container last">
      <p class="paragraph">The compilation of relapse into an automata can have some state explosions resulting in very long compilations. This is why the mem package is the default implementation. It provides comparable speeds and does not have any state explosion problems.</p>
    </div>
  </div>
  <div class="footer-section">
    <div class="footer-div">
      <div class="w-layout-grid footer-grid">
        <div class="footer-col">
          <div class="image-div"><img src="../images/katydid-logo-quality.png" loading="lazy" width="51.5" alt="" class="image-31"></div>
          <div class="text-block-21">katydid</div>
        </div>
        <div id="w-node-abfc4d3e-97fb-1ab1-409a-ead63d40dead-3d40dea5" class="footer-col">
          <h1 class="grid-head">About</h1>
          <div class="grid-text">
            <a href="https://github.com/katydid" target="_blank" class="footer-link">Project</a>
          </div>
          <div class="grid-text">
            <a href="http://katydid.github.io/play" target="_blank" class="footer-link">Playground</a>
          </div>
        </div>
        <div id="w-node-abfc4d3e-97fb-1ab1-409a-ead63d40deb4-3d40dea5" class="footer-col">
          <h1 class="grid-head">Contribute</h1>
          <div class="grid-text">
            <a href="mailto:awalterschulze@gmail.com" class="footer-link">Contact</a>
          </div>
          <div class="grid-text">
            <a href="http://github.com/katydid" target="_blank" class="footer-link">Github</a>
          </div>
          <div class="grid-text">
            <a href="#" target="_blank" class="footer-link">More</a>
          </div>
        </div>
        <div id="w-node-abfc4d3e-97fb-1ab1-409a-ead63d40debd-3d40dea5" class="footer-col">
          <h1 class="grid-head">Implement</h1>
          <div class="grid-text">
            <a href="http://github.com/katydid/katydid" target="_blank" class="footer-link">Go</a>
          </div>
          <div class="grid-text">
            <a href="https://github.com/katydid/katydid-haskell" target="_blank" class="footer-link">Haskell</a>
          </div>
          <div class="grid-text">
            <a href="http://github.com/katydid/proofs" target="_blank" class="footer-link">Lean</a>
          </div>
        </div>
        <div id="w-node-abfc4d3e-97fb-1ab1-409a-ead63d40dec6-3d40dea5" class="footer-col">
          <h1 class="grid-head">Social</h1>
          <div class="grid-text">
            <a href="https://github.com/awalterschulze" target="_blank" class="footer-link">Github</a>
          </div>
          <div class="grid-text">
            <a href="https://www.linkedin.com/in/awalterschulze/" target="_blank" class="footer-link">LinkedIn</a>
          </div>
          <div class="grid-text">
            <a href="https://twitter.com/awalterschulze" target="_blank" class="footer-link">Twitter</a>
          </div>
          <div class="grid-text">
            <a href="https://www.youtube.com/c/awalterschulze" target="_blank" class="footer-link">Youtube</a>
          </div>
        </div>
        <div id="w-node-abfc4d3e-97fb-1ab1-409a-ead63d40ded1-3d40dea5" class="footer-col">
          <h1 class="grid-head">Help</h1>
          <div class="grid-text">
            <a href="http://katydid.github.io/tour" target="_blank" class="footer-link">Tour</a>
          </div>
          <div class="grid-text">
            <a href="http://github.com/katydid/katydid/issues" target="_blank" class="footer-link">Issues</a>
          </div>
          <div class="grid-text">
            <a href="../relapse/syntax.html" target="_blank" class="footer-link">Syntax</a>
          </div>
        </div>
      </div>
      <div class="text-block-3">© Copyright 2014 - 2022 Walter Schulze</div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=62fa1b7c943e1b195a14776d" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="../js/webflow.js" type="text/javascript"></script>
</body>
</html>